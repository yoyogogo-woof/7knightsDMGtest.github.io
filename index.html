<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>傷害計算機</title>
  <style>
    body {
      font-family: 'Noto Sans TC', sans-serif;
      background-color: #f9fafb;
      color: #111827;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #2563eb;
    }
    .input-group {
      margin: 10px 0;
    }
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 4px;
    }
    input {
      width: 100%;
      padding: 8px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
    }
    button {
      width: 100%;
      margin-top: 20px;
      padding: 10px;
      font-size: 16px;
      background-color: #2563eb;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: #1d4ed8;
    }
    #result {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      color: #111827;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>傷害計算機</h1>

  <div class="input-group"><label>面板攻擊力</label><input type="number" id="atkPanel" value="0"></div>
  <div class="input-group"><label>基礎攻擊力</label><input type="number" id="atkBase" value="0"></div>
  <div class="input-group"><label>陣型攻%</label><input type="number" id="formAtk" value="0"></div>
  <div class="input-group"><label>寵物潛能攻%</label><input type="number" id="petAtkPercent" value="0"></div>
  <div class="input-group"><label>寵物攻擊力</label><input type="number" id="petAtkFlat" value="0"></div>
  <div class="input-group"><label>Buff加攻%</label><input type="number" id="buffAtk" value="0"></div>
  <div class="input-group"><label>寵物技能加攻%</label><input type="number" id="petSkillAtk" value="0"></div>
  <div class="input-group"><label>招式倍率</label><input type="number" id="skillRate" value="1"></div>
  <div class="input-group"><label>暴擊傷害%</label><input type="number" id="critDmg" value="0"></div>
  <div class="input-group"><label>弱點傷害%</label><input type="number" id="weakDmg" value="0"></div>
  <div class="input-group"><label>復仇套增傷%</label><input type="number" id="revengeDmg" value="0"></div>
  <div class="input-group"><label>敵方防禦力</label><input type="number" id="enemyDef" value="0"></div>

  <button onclick="calculate()">計算傷害</button>

  <div id="result">請輸入數值並按下計算</div>

  <script>
    function calculate() {
      const atkPanel = parseFloat(document.getElementById('atkPanel').value) || 0;
      const atkBase = parseFloat(document.getElementById('atkBase').value) || 0;
      const formAtk = parseFloat(document.getElementById('formAtk').value) / 100 || 0;
      const petAtkPercent = parseFloat(document.getElementById('petAtkPercent').value) / 100 || 0;
      const petAtkFlat = parseFloat(document.getElementById('petAtkFlat').value) || 0;
      const buffAtk = parseFloat(document.getElementById('buffAtk').value) / 100 || 0;
      const petSkillAtk = parseFloat(document.getElementById('petSkillAtk').value) / 100 || 0;
      const skillRate = parseFloat(document.getElementById('skillRate').value) / 100 || 1;
      const critDmg = parseFloat(document.getElementById('critDmg').value) / 100 || 0;
      const weakDmg = parseFloat(document.getElementById('weakDmg').value) / 100 || 0;
      const revengeDmg = parseFloat(document.getElementById('revengeDmg').value) / 100 || 0;
      const enemyDef = parseFloat(document.getElementById('enemyDef').value) || 0;

      const defRate = 1 - (enemyDef / (467 + enemyDef));

      const dmg = (
        atkPanel +
        (atkBase * (formAtk + petAtkPercent)) +
        petAtkFlat
      ) *
      (1 + buffAtk + petSkillAtk) *
      skillRate *
      (1 + critDmg) *
      (1 + weakDmg) *
      (1 + revengeDmg) *
      defRate;

      document.getElementById('result').innerText = `最終傷害：${Math.round(dmg).toLocaleString()}`;
    }
  </script>
</body>
</html>
